<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="account_move_customize_view_form" model="ir.ui.view">
        <field name="name">dk_group.account.view_move_form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form" />
        <field name="arch" type="xml">
            <xpath expr="//page[@name='other_info']" position="after">
				<page id="other_tab_v7" string="Infos V7" name="infos_v7">
                    <group>
                        <group>
                            <field name="picking_id"/>
                            <field name="incoterm_port"/>
                            <field name="incoterm_date"/>
                            <field name="payment_method_id"/>
                        </group>
                        <group>
                            <field name="total_ht"/>
                            <field name="total_tva"/>
                            <field name="total_ttc"/>
                            <field name="piece_comptable"/>
                            <field name="account_id"/>
                        </group>
                    </group>
                </page>
            </xpath>



            <xpath expr="//page[@name='invoice_tab']/field[@name='invoice_line_ids']/tree" position="replace">


                                    <tree editable="bottom" string="Journal Items" default_order="sequence, id">
                                        <control>
                                            <create name="add_line_control" string="Add a line"/>
                                            <create name="add_section_control" string="Add a section" context="{'default_display_type': 'line_section'}"/>
                                            <create name="add_note_control" string="Add a note" context="{'default_display_type': 'line_note'}"/>
                                        </control>

                                        <!-- Displayed fields -->
                                        <field name="sequence" widget="handle"/>
                                        <field name="default_code"/>
                                        <field name="product_id" optional="show" options="{'no_create': True}" domain="context.get('default_move_type') in ('out_invoice', 'out_refund', 'out_receipt')                                                     and [('sale_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]                                                     or [('purchase_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]                                                "/>
                                        <field name="name" widget="section_and_note_text" optional="hide"/>
                                        <field name="account_id" invisible="1" context="{'partner_id': partner_id, 'move_type': parent.move_type}" groups="account.group_account_readonly" options="{'no_create': True}" domain="[('deprecated', '=', False), ('account_type', 'not in', ('asset_receivable', 'liability_payable')), ('company_id', '=', parent.company_id), ('is_off_balance', '=', False)]" attrs="{'required': [('display_type', 'not in', ('line_note', 'line_section'))]}"/>
                                        <field name="analytic_distribution" invisible="1" widget="analytic_distribution" groups="analytic.group_analytic_accounting" optional="hide" options="{'product_field': 'product_id', 'account_field': 'account_id'}" business_domain_compute="parent.move_type in ['out_invoice', 'out_refund', 'out_receipt'] and 'invoice' or parent.move_type in ['in_invoice', 'in_refund', 'in_receipt'] and 'bill' or 'general'"/>

                                       <field name="uom_qty"/>
                                        <field name="number_of_unit"/>
                                        <field name="number_of_pack"/>

                                        <field name="weight"/>
                                        <field name="weight_uom_id"/>

                                        <field name="quantity" optional="show"/>
                                        <field name="product_uom_category_id" invisible="1"/>
                                        <field name="product_uom_id"/>
                                        <field name="product_uos"/>



                                        <field name="price_unit" string="Price"/>
                                        <field name="discount" string="Disc.%" optional="hide"/>
                                        <field name="tax_ids" widget="many2many_tags" domain="[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id), ('country_id', '=', parent.tax_country_id)]" context="{'append_type_to_tax_name': not parent.invoice_filter_type_domain}" options="{'no_create': True}" optional="show"/>
                                        <field name="price_subtotal" string="Subtotal"/>
                                        <field name="price_total" string="Total" invisible="1"/>

                                        <!-- Others fields -->
                                        <field name="partner_id" invisible="1"/>
                                        <field name="currency_id" invisible="1"/>
                                        <field name="company_id" invisible="1"/>
                                        <field name="company_currency_id" invisible="1"/>
                                        <field name="display_type" force_save="1" invisible="1"/>

                                        <field name="supplierinfo_id" optional="hide"/>

                                        <field name="stock_move_ids" optional="hide" widget="many2many_tags"/>
                                        <button name="update_stock_move" type="object" string="update"/>
                                    </tree>

            </xpath>




            <!--<xpath expr="//field[@name='discount']" position="after">
                <field name="product_packaging" optional="hide"/>
                <field name="prodlot_id" widget="many2many_tags" optional="hide"/>
                <field name="lot" optional="hide"/>
                <field name="weight" optional="hide"/>
                <field name="weight_uom_id" optional="hide"/>
                <field name="cadeau" optional="hide"/>
                <field name="cost_price" optional="hide"/>
                <field name="discount1" optional="hide"/>
                <field name="discount2" optional="hide"/>
                <field name="initial_price"  optional="hide"/>
                <field name="margin" optional="hide"/>
                <field name="margin_percent" optional="hide"/>
                <field name="number_of_pack" optional="hide"/>
                <field name="number_of_unit" optional="hide"/>
                <field name="promotion" optional="hide"/>
                <field name="uom_qty" optional="hide"/>
                <field name="type" optional="hide"/>
                <field name="histo_cost_price" optional="hide"/>
                <field name="supplierinfo_id" optional="hide"/>

                <field name="stock_move_ids" optional="hide" widget="many2many_tags"/>
                <button name="update_stock_move" type="object" string="update"/>

            </xpath>-->

            <xpath expr="//field[@name='partner_id']" position="after">
				<field name="fiscal_position_id"/>
                <field name="invoice_incoterm_id"/>
                <field name="incoterm_port"/>
                <field name="incoterm_date"/>
                <field name="picking_id"/>
            </xpath>

            <xpath expr="//div[@class='o_td_label']//label[@for='invoice_payment_term_id']" position="replace">
            </xpath>
            <xpath expr="//div[@class='d-flex']//field[@name='invoice_payment_term_id']" position="replace">
            </xpath>

            <xpath expr="//field[@name='payment_reference']" position="replace">
            </xpath>

            <xpath expr="//group[@id='header_right_group']//div[3]" position="before">
                <field name="account_id"/>
            </xpath>

            <xpath expr="//field[@name='narration']" position="before">
				<field name="invoice_payment_term_id"/>
                <field name="payment_method_id"/>
            </xpath>
			
<!--			<xpath expr="//field[@name='partner_id']" position="after">-->
<!--				<field name="payment_state" readonly="0"/>-->
<!--            </xpath>-->

        </field>
    </record>

</odoo>