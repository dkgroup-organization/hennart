<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <template id="scanner_scenario_preparation" name="scanner_scenario_preparation">
            <html>
                <t t-call="wms_scanner.scanner_html_head"/>
                <body class="font-poppins duration-500 min-h-screen">
                    <t t-call="wms_scanner.scanner_menu_body_header"/>
                    <t t-call="customize_scanner.scanner_preparation_body_main"/>
                    <t t-call="wms_scanner.scanner_script_js"/>
                </body>
            </html>
        </template>

        <template id="scanner_preparation_body_main" name="scanner_preparation_body_main">
            <main class="relative">
                <section id="preparation" class="screen_title">
                    <div class="container mx-auto px-5 pb-5 relative">
                        <table>
                            <tbody>
                                <tr>
                                    <td>
                                        <t t-call="wms_scanner.wms_scanner_image_box"/>
                                    </td>
                                    <td>
                                        <h1>preparation</h1>
                                        <span t-if="data.get('picking')" t-esc="data['picking'].name"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <t t-if="data.get('move_line')" t-call="customize_scanner.scanner_line_preparation"/>
                        <t t-if="data.get('weight_line')" t-call="customize_scanner.scanner_weight_preparation"/>
                    </div>
                </section>
            </main>
        </template>

        <template id="scanner_line_preparation" name="scanner_line_preparation">
            <t t-if="data.get('step')">
                <t t-set="step" t-value="data.get('step')"/>
                <form class="flex flex-col items-center gap-2 landscape:gap-1 landscape:w-[49%]"
                      t-att-action="'./scanner?scenario={}&amp;step={}'.format(step.scenario_id.id, step.id)"
                      autoComplete="off"
                      method="post">
                    <t t-call="customize_scanner.scanner_preparation_location_id"/>
                    <t t-call="customize_scanner.scanner_preparation_product_id"/>
                    <t t-call="customize_scanner.scanner_preparation_input_lot_id"/>
                    <t t-call="customize_scanner.scanner_preparation_input_quantity"/>

                    <button type="submit" class="btn-green landscape:col-span-2">Valid</button>
                </form>
            </t>
        </template>

        <template id="scanner_weight_preparation" name="scanner_weight_preparation">
            <t t-if="data.get('step')">
                <t t-set="step" t-value="data.get('step')"/>
                <form class="flex flex-col items-center gap-2 landscape:gap-1 landscape:w-[49%]"
                      t-att-action="'./scanner?scenario={}&amp;step={}'.format(step.scenario_id.id, step.id)"
                      autoComplete="off"
                      method="post">

                    <t t-if="not data.get('printer')" t-call="customize_scanner.scanner_preparation_input_printer"/>
                    <t t-if="data.get('printer')">
                        <t t-call="customize_scanner.scanner_preparation_product_id"/>
                        <t t-call="customize_scanner.scanner_preparation_input_lot_id"/>
                        <t t-call="customize_scanner.scanner_preparation_input_quantity"/>
                        <t t-if="step.action_scanner != 'scan_weight'">
                            <t t-call="customize_scanner.scanner_preparation_input_weight"/>
                        </t>
                        <t t-if="step.action_scanner == 'scan_weight'">
                            <input type="hidden" name="weight" t-att-value="data.get('weight')"/>
                            <t t-call="customize_scanner.scanner_preparation_input_weighting_device"/>
                        </t>
                    </t>

                    <button type="submit" class="btn-green landscape:col-span-2">Valid</button>
                </form>
            </t>
        </template>

        <template id="scanner_input" name="preparation_input">
            <div class="relative" t-if="step.action_presentation" t-esc="step.action_presentation"/>
            <t t-if="step.action_variable == action_variable">
                <div class="w-full">
                    <input
                            t-att-type="step.get_input_type(data)"
                            id="scan"
                            name="scan"
                            min="0"
                            t-att-step="step.get_input_step(data)"
                            t-att-class="step.get_input_class(data)"
                            t-att-placeholder="step.get_input_placeholder(data)"
                            autoComplete="off"
                    />

                    <div id="input_message"
                         class="mt-4 w-90 flex flex-col gap-6 mx-auto landscape:gap-3 landscape:absolute landscape:w-[49%] landscape:right-0 landscape:top-0 landscape:pr-5 landscape:m-auto">
                        <p t-if="data.get('warning')" class="border-b-2 pb-5 mb-5 border-gray-300 input-warning">
                            <t t-out="data.get('warning')"/>
                        </p>
                        <p t-if="data.get('message')" class="border-b-2 pb-5 mb-5 border-gray-300">
                            <t t-out="data.get('message')"/>
                        </p>
                        <t t-call="customize_scanner.scanner_button_option"/>
                    </div>
                </div>
            </t>
            <t t-else="">
                <div class="relative input-default">
                    <span t-esc="step.get_input_description_left(data, action_variable)"/>
                    <span t-esc="step.get_input_description_right(data, action_variable)" class="absolute right-4"/>
                </div>
            </t>
        </template>

        <template id="scanner_button_option" name="scanner_button_option">
            <div>
                <t t-foreach="step.get_button_option(data)" t-as="button_option">
                    <a class="input-select mb-1"
                       t-att-href="button_option.get('href', '')">
                        <t t-esc="button_option.get('text', '')"/>
                    </a>
                </t>
            </div>
        </template>

        <template id="scanner_preparation_location_id" name="scanner_preparation_location_id">
            <t t-call="customize_scanner.scanner_input">
                <t t-set="action_variable" t-value="'location_id'"/>
            </t>
        </template>

        <template id="scanner_preparation_product_id" name="scanner_preparation_product_id">
            <t t-call="customize_scanner.scanner_input">
                <t t-set="action_variable" t-value="'product_id'"/>
            </t>
        </template>

        <template id="scanner_preparation_input_lot_id" name="scanner_preparation_input_lot_id">
            <t t-call="customize_scanner.scanner_input">
                <t t-set="action_variable" t-value="'lot_id'"/>
            </t>
        </template>

        <template id="scanner_preparation_input_quantity" name="scanner_preparation_input_quantity">
            <t t-call="customize_scanner.scanner_input">
                <t t-set="action_variable" t-value="'quantity'"/>
            </t>
        </template>

        <template id="scanner_preparation_input_printer" name="scanner_preparation_input_printer">
            <t t-call="customize_scanner.scanner_input">
                <t t-set="action_variable" t-value="'printer'"/>
            </t>
        </template>

        <template id="scanner_preparation_input_weight" name="scanner_preparation_input_weight">
            <t t-call="customize_scanner.scanner_input">
                <t t-set="action_variable" t-value="'weight'"/>
            </t>
        </template>

        <template id="scanner_preparation_input_weighting_device" name="scanner_preparation_input_weighting_device">
            <t t-call="customize_scanner.scanner_input">
                <t t-set="action_variable" t-value="'weighting_device'"/>
            </t>
        </template>

        <template id="scanner_preparation_input_tare" name="scanner_preparation_input_tare">
            <t t-call="customize_scanner.scanner_input">
                <t t-set="action_variable" t-value="'tare'"/>
            </t>
        </template>




    </data>
</odoo>
